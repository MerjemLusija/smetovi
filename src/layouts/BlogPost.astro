---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import PageLayout from "./PageLayout.astro";

type Props = CollectionEntry<"blog">["data"];
const { title, description, pubDate, heroImage, photoAuthor } = Astro.props;
---

<PageLayout siteTitle={title} siteDescription={description}>
  <main class="w-full m-0">
    {heroImage && (
      <div class="image-container">
        <img src={heroImage} alt={title} class="hero-image" />
      </div>
    )}

    <article>
      <div class="prose">
        <div class="title mb-4">
          <div class="date font-atkinson text-gray-500 mb-2">
            {pubDate && (
              <div class="last-updated-on">
                <FormattedDate date={pubDate} />
              </div>
            )}
          </div>
          <h1 class="text-3xl font-exo2 font-bold mb-2">{title}</h1>
          <div class="ttl-sep w-20 h-1 bg-orange-500 my-2"></div>
          <h2 class="photo-author font-atkinson text-gray-500 text-lg">
            {photoAuthor}
          </h2>
        </div>
        <slot />
      </div>
    </article>
  </main>
</PageLayout>

<style>
  .image-container {
    width: 100%;
    height: 70vh;
    position: relative;
    overflow: hidden;
  }

  .hero-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }

  .prose {
    width: 720px;
    max-width: calc(100% - 2em);
    background-color: white;
    margin: 2em auto 0;
    padding: 3em;
    color: rgb(var(--gray-dark));
    box-shadow:
      0 0 50px rgba(150, 150, 150, 0.5),
      0 0 50px rgba(150, 150, 150, 0.5);
    flex-grow: 1;
    min-height: calc(100vh - 64px);
    overflow: visible;
    border-radius: 12px;
    position: relative;
    z-index: 2;
  }

  .title {
    text-align: left;
  }

  .photo-author {
    text-align: left;
  }

  @media (max-width: 768px) {
    .image-container {
      height: 50vh;
    }

    .prose {
      padding: 1.5em;
      margin-top: 1.5em;
    }
  }
</style>
